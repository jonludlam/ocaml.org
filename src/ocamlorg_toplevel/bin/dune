; Base

(executable
 (name toplevel)
 (libraries ocamlorg_toplevel)
 (modules toplevel)
 (preprocess
  (pps js_of_ocaml-ppx))
 (modes js))

(subdir
 js/
 (rule
  (alias toplevel)
  (targets toplevel.js)
  (deps ../toplevel.bc.js)
  (action
   (progn
    (run cp ../toplevel.bc.js toplevel.js)))))
